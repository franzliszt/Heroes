<div class="jumbotron minjumbotron" *ngIf="!velkommen">
    <h1>Lån penger</h1>
</div>
<div *ngIf="!velkommen && !status">
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Forbrukslåner</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Hjem</a></li>
                <li><a href="#" (click)="visMinLaneSoknad()">Hent min lånesøknad</a></li>
            </ul>
        </div>
    </nav>
</div>

<div class="container-fluid">
    <!--VELKOMSTVINDU-->
    <div class="jumbotron velkomst" *ngIf="velkommen">
        <div class="text-justify">
            <h1>Velkommen til Angular2 gjeldsbrev</h1>
        </div>
        <div class="center-block">
            <button class="btn regbutton" (click)="tilbake()">Gå til søknadsskjema</button>
        </div>
    </div>


    <!--KALKULATOR-->
    <div *ngIf="visKalkulator && !status">
        <div class="boks">
            <h2 style="color:#eaeaea;">Lån inntil 700 000 kroner!</h2>
            <div>
                <h3 style="color:#eaeaea;">Lånebeløp</h3>
                <div class="venstre-label">10 000 kr</div>
                <div class="hoyre-label">700 000 kr</div>
                <div>
                    <input type="range" min="10000" max="700000" [(ngModel)]="belop" 
                           (ngModel)="avdrag" step="5000" (mousedown)="ut()" (mouseup)="ut()" />
                </div>
                <input id="boksinput" value="{{ belop }}" />
            </div>
            <div>
                <h3>Nedbetalingstid</h3>
                <div class="venstre-label">3 år</div>
                <div class="hoyre-label">20 år</div>
                <div>
                    <input type="range" min="3" max="20" [(ngModel)]="tid" step="1" (mouseup)="ut()" />
                </div>
                <input id=boksinput value="{{ tid }}" />
            </div>
            <div class="info">
                <h2 style="color:#eaeaea;">{{ avdrag }} <small>pr mnd</small></h2>
                <h3>Rente: 7%</h3>
            </div>
        </div>
        <button class="btn btn-default logbutton" (click)="tilSkjema()">Til søknadskjema</button>
    </div>


    <!--SØKNADSSKJEMA-->
    <div class="boks" *ngIf="visSkjema && !status">
        <p style="color:#eaeaea; font-size: 2em;" class="boksinput">
            Ønsket lånebeløp <input id="boksinput" value="{{ belop }}" /> kr.
        </p>

        <form [formGroup]="skjema" (ngSubmit)="vedSubmit()" class="register-form">
            <input class="form-control" formControlName="id" type="hidden" #id />
            <div class="inputPersonalia">Personnummer</div>
            <input class="form-control" name="personnummer" formControlName="personnummer" placeholder="11 siffer" />
            <p class="alert alert-warning"
               [hidden]="skjema.controls.personnummer.valid || (skjema.controls.personnummer.pristine && !submitted)">
                Kun 11 siffer!
            </p>

            <div class="inputPersonalia">Mobiltelefon</div>
            <input class="form-control" name="mobiltelefon" formControlName="mobiltelefon" placeholder="8 siffer" />
            <p class="alert alert-warning"
               [hidden]="skjema.controls.mobiltelefon.valid || (skjema.controls.mobiltelefon.pristine && !submitted)">
                Kun 11 siffer!
            </p>

            <div class="inputPersonalia">Epost</div>
            <input class="form-control" name="epost" formControlName="epost" placeholder="Din epost" />
            <p class="alert alert-warning"
               [hidden]="skjema.controls.epost.valid || (skjema.controls.epost.pristine && !submitted)">
                Ugyldig epost!
            </p>

            <div class="inputPersonalia">Nedbetalingstid</div>
            <input class="form-control" name="nedbetalingstid" formControlName="nedbetalingstid" placeholder="8 siffer" />
            <p class="alert alert-warning"
               [hidden]="skjema.controls.nedbetalingstid.valid || (skjema.controls.nedbetalingstid.pristine && !submitted)">
                Kun 11 siffer!
            </p>

            <hr />
            <div class="row">
                <div class="col-md-4 col-sm-4 col-xs-4 col-lg-4">
                    <button type="submit" *ngIf="skjemaStatus=='registrer'" [disabled]="!skjema.valid"
                            class="btn btn-default regbutton" title="Registrer søknad">
                        <span class="glyphicon glyphicon-ok"></span>
                    </button>
                    <button type="submit" *ngIf="skjemaStatus=='endre'" title="Endre" [disabled]="!skjema.valid"
                            class="btn btn-primary regbutton">
                        <span class="glyphicon glyphicon-edit"></span>
                    </button>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 col-lg-6">
                    <button *ngIf="skjemaStatus=='endre'" [disabled]="!skjema.valid"
                            (click)="slettSoknad(id.value)" class="btn btn-default regbutton" title="Slett skjema">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 col-lg-6">
                    <button class="btn btn-default logbutton" (click)="tilbake()">Endre lånebeløp</button>
                </div>
            </div>

        </form>
    </div>

    <!--Hent en persons søknad(er)-->
    <div class="col-md-6 col-md-offset-1" *ngIf="finnMinSoknad">
        <h1>Hent min søknad</h1>
        <form [formGroup]="skjema" class="register-form" (ngSumbit)="vedSubmit()">
            <div class="row">
                <div class="col-md-4 col-sm-4 col-lg-4">
                    <label for="belop">Tast inn søknadsnummeret</label>
                    <input class="form-control" name="id" #data
                           formControlName="id" />
                    <p class="alert alert-warning"
                       [hidden]="skjema.controls.id.valid || (skjema.controls.id.pristine && !submitted)">
                        Kun heltall.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-6 col-lg-6">
                    <button *ngIf="skjemaStatus=='endre'" [disabled]="!skjema.valid" class="btn btn-default regbutton" (click)="hentMinSoknad(data.value)">Hent min søknad</button>
                    <!--<button *ngIf="skjemaStatus=='slett'" [disabled]="!skjema.valid" class="btn btn-default regbutton" (click)="hentMinSoknadForSletting(data.value)">Hent min søknad for sletting</button>-->
                </div>
            </div>
        </form>

        <button class="btn btn-default logbutton" (click)="tilbake()">Til kalkulator</button>
    </div>

    <div *ngIf="status">
        <div class="jumbotron feilbox">
            <div>
                <h2 id="feilmelding">Opps. {{melding}}</h2>
                <button class="btn regbutton" (click)="tilbake()">Prøv på nytt</button>
            </div>
        </div>
    </div>


</div>